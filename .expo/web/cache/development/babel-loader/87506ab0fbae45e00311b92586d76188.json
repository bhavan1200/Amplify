{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\bhavan\\\\Project\\\\src\\\\screens\\\\StoryScreen\\\\index.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { useRoute, useNavigation } from '@react-navigation/native';\nimport { API, graphqlOperation } from 'aws-amplify';\nimport { listStorys } from \"../../graphql/queries\";\nimport styles from \"./styles\";\nimport storiesData from \"../../data/stories\";\nimport ProfilePicture from \"../../components/ProfilePicture\";\nimport Feather from \"@expo/vector-icons/Feather\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\n\nvar StoryScreen = function StoryScreen() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      stories = _useState2[0],\n      setStories = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeStoryIndex = _useState4[0],\n      setActiveStoryIndex = _useState4[1];\n\n  var route = useRoute();\n  useEffect(function () {\n    fetchStories();\n    setActiveStoryIndex(0);\n  }, []);\n\n  var fetchStories = function fetchStories() {\n    var _storiesData;\n\n    return _regeneratorRuntime.async(function fetchStories$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(listStorys)));\n\n          case 3:\n            _storiesData = _context.sent;\n            console.log(_storiesData);\n            setStories(_storiesData.data.listStorys.items);\n            _context.next = 12;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log('error fetching stories');\n            console.log(_context.t0);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n\n  var handleNextStory = function handleNextStory() {\n    if (activeStoryIndex >= stories.length - 1) {\n      return;\n    }\n\n    setActiveStoryIndex(activeStoryIndex + 1);\n  };\n\n  var handlePrevStory = function handlePrevStory() {\n    if (activeStoryIndex <= 0) {\n      return;\n    }\n\n    setActiveStoryIndex(activeStoryIndex - 1);\n  };\n\n  var handlePress = function handlePress(evt) {\n    var x = evt.nativeEvent.locationX;\n    var screenWidth = Dimensions.get('window').width;\n\n    if (x < screenWidth / 2) {\n      handlePrevStory();\n    } else {\n      handleNextStory();\n    }\n  };\n\n  if (!stories || stories.length === 0) {\n    return React.createElement(SafeAreaView, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  var activeStory = stories[activeStoryIndex];\n  return React.createElement(SafeAreaView, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, React.createElement(TouchableWithoutFeedback, {\n    onPress: handlePress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, React.createElement(ImageBackground, {\n    source: {\n      uri: activeStory.image\n    },\n    style: styles.image,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.userInfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, React.createElement(ProfilePicture, {\n    uri: activeStory.user.image,\n    size: 50,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: styles.userName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, activeStory.user.name), React.createElement(Text, {\n    style: styles.postedTime,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, activeStory.createdAt)), React.createElement(View, {\n    style: styles.bottomContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.cameraButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, React.createElement(Feather, {\n    name: \"camera\",\n    size: 30,\n    color: '#ffffff',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  })), React.createElement(View, {\n    style: styles.textInputContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, React.createElement(TextInput, {\n    style: styles.textInput,\n    editable: true,\n    placeholder: \"Send message\",\n    placeholderTextColor: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  })), React.createElement(View, {\n    style: styles.messageButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, React.createElement(Ionicons, {\n    name: \"paper-plane-outline\",\n    size: 35,\n    color: \"#ffffff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default StoryScreen;","map":{"version":3,"sources":["C:/Users/bhavan/Project/src/screens/StoryScreen/index.js"],"names":["React","useEffect","useState","useRoute","useNavigation","API","graphqlOperation","listStorys","styles","storiesData","ProfilePicture","Feather","Ionicons","StoryScreen","stories","setStories","activeStoryIndex","setActiveStoryIndex","route","fetchStories","graphql","console","log","data","items","handleNextStory","length","handlePrevStory","handlePress","evt","x","nativeEvent","locationX","screenWidth","Dimensions","get","width","activeStory","container","uri","image","userInfo","user","userName","name","postedTime","createdAt","bottomContainer","cameraButton","textInputContainer","textInput","messageButton"],"mappings":";;;;;;AACA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;;;;;;;;;AAWA,SAASC,QAAT,EAAmBC,aAAnB,QAAwC,0BAAxC;AACA,SAASC,GAAT,EAAcC,gBAAd,QAAsC,aAAtC;AAEA,SAASC,UAAT;AACA,OAAOC,MAAP;AACA,OAAOC,WAAP;AACA,OAAOC,cAAP;AACA,OAAOC,OAAP;AACA,OAAOC,QAAP;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAExB,kBAA8BX,QAAQ,CAAC,EAAD,CAAtC;AAAA;AAAA,MAAOY,OAAP;AAAA,MAAgBC,UAAhB;;AACA,mBAAgDb,QAAQ,CAAC,IAAD,CAAxD;AAAA;AAAA,MAAOc,gBAAP;AAAA,MAAyBC,mBAAzB;;AAEA,MAAMC,KAAK,GAAGf,QAAQ,EAAtB;AAEAF,EAAAA,SAAS,CAAC,YAAM;AACdkB,IAAAA,YAAY;AACZF,IAAAA,mBAAmB,CAAC,CAAD,CAAnB;AACD,GAHQ,EAGN,EAHM,CAAT;;AAKA,MAAME,YAAY,GAAG,SAAfA,YAAe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAESd,GAAG,CAACe,OAAJ,CAAYd,gBAAgB,CAACC,UAAD,CAA5B,CAFT;;AAAA;AAEXE,YAAAA,YAFW;AAGjBY,YAAAA,OAAO,CAACC,GAAR,CAAYb,YAAZ;AACAM,YAAAA,UAAU,CAACN,YAAW,CAACc,IAAZ,CAAiBhB,UAAjB,CAA4BiB,KAA7B,CAAV;AAJiB;AAAA;;AAAA;AAAA;AAAA;AAMjBH,YAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR;;AAPiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAWA,MAAMG,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,QAAIT,gBAAgB,IAAIF,OAAO,CAACY,MAAR,GAAiB,CAAzC,EAA4C;AAC1C;AACD;;AACDT,IAAAA,mBAAmB,CAACD,gBAAgB,GAAG,CAApB,CAAnB;AACD,GALD;;AAOA,MAAMW,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,QAAIX,gBAAgB,IAAI,CAAxB,EAA2B;AACzB;AACD;;AACDC,IAAAA,mBAAmB,CAACD,gBAAgB,GAAG,CAApB,CAAnB;AACD,GALD;;AAOA,MAAMY,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAS;AAC3B,QAAMC,CAAC,GAAGD,GAAG,CAACE,WAAJ,CAAgBC,SAA1B;AACA,QAAMC,WAAW,GAAGC,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBC,KAA7C;;AAEA,QAAIN,CAAC,GAAGG,WAAW,GAAG,CAAtB,EAAyB;AACvBN,MAAAA,eAAe;AAChB,KAFD,MAEO;AACLF,MAAAA,eAAe;AAChB;AACF,GATD;;AAWA,MAAI,CAACX,OAAD,IAAYA,OAAO,CAACY,MAAR,KAAmB,CAAnC,EAAsC;AACpC,WACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAKD;;AAED,MAAMW,WAAW,GAAGvB,OAAO,CAACE,gBAAD,CAA3B;AAEA,SACE,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAER,MAAM,CAAC8B,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,wBAAD;AAA0B,IAAA,OAAO,EAAEV,WAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,eAAD;AAAiB,IAAA,MAAM,EAAE;AAACW,MAAAA,GAAG,EAAEF,WAAW,CAACG;AAAlB,KAAzB;AAAmD,IAAA,KAAK,EAAEhC,MAAM,CAACgC,KAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEhC,MAAM,CAACiC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,cAAD;AAAgB,IAAA,GAAG,EAAEJ,WAAW,CAACK,IAAZ,CAAiBF,KAAtC;AAA6C,IAAA,IAAI,EAAE,EAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEhC,MAAM,CAACmC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BN,WAAW,CAACK,IAAZ,CAAiBE,IAAhD,CAFF,EAGE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpC,MAAM,CAACqC,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCR,WAAW,CAACS,SAA7C,CAHF,CADF,EAME,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEtC,MAAM,CAACuC,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEvC,MAAM,CAACwC,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAC,QAAd;AAAuB,IAAA,IAAI,EAAE,EAA7B;AAAiC,IAAA,KAAK,EAAE,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAExC,MAAM,CAACyC,kBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AACE,IAAA,KAAK,EAAEzC,MAAM,CAAC0C,SADhB;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,WAAW,EAAC,cAHd;AAIE,IAAA,oBAAoB,EAAE,OAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,EAYE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE1C,MAAM,CAAC2C,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAC,qBAAf;AAAqC,IAAA,IAAI,EAAE,EAA3C;AAA+C,IAAA,KAAK,EAAE,SAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAZF,CANF,CADF,CADF,CADF;AA6BD,CAvFD;;AAyFA,eAAetC,WAAf","sourcesContent":["  \r\nimport React, {useEffect, useState} from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  SafeAreaView,\r\n  ImageBackground,\r\n  ActivityIndicator,\r\n  TextInput,\r\n  TouchableWithoutFeedback,\r\n  Dimensions,\r\n} from 'react-native';\r\nimport { useRoute, useNavigation } from '@react-navigation/native';\r\nimport { API, graphqlOperation } from 'aws-amplify';\r\n\r\nimport { listStorys } from '../../graphql/queries';\r\nimport styles from './styles';\r\nimport storiesData from '../../data/stories';\r\nimport ProfilePicture from \"../../components/ProfilePicture\";\r\nimport Feather from \"react-native-vector-icons/Feather\";\r\nimport Ionicons from \"react-native-vector-icons/Ionicons\";\r\n\r\nconst StoryScreen = () => {\r\n\r\n  const [stories, setStories] = useState([]);\r\n  const [activeStoryIndex, setActiveStoryIndex] = useState(null);\r\n\r\n  const route = useRoute();\r\n\r\n  useEffect(() => {\r\n    fetchStories();\r\n    setActiveStoryIndex(0);\r\n  }, []);\r\n\r\n  const fetchStories = async () => {\r\n    try {\r\n      const storiesData = await API.graphql(graphqlOperation(listStorys));\r\n      console.log(storiesData);\r\n      setStories(storiesData.data.listStorys.items);\r\n    } catch (e) {\r\n      console.log('error fetching stories');\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  const handleNextStory = () => {\r\n    if (activeStoryIndex >= stories.length - 1) {\r\n      return;\r\n    }\r\n    setActiveStoryIndex(activeStoryIndex + 1);\r\n  }\r\n\r\n  const handlePrevStory = () => {\r\n    if (activeStoryIndex <= 0) {\r\n      return;\r\n    }\r\n    setActiveStoryIndex(activeStoryIndex - 1);\r\n  }\r\n\r\n  const handlePress = (evt) => {\r\n    const x = evt.nativeEvent.locationX;\r\n    const screenWidth = Dimensions.get('window').width;\r\n\r\n    if (x < screenWidth / 2) {\r\n      handlePrevStory();\r\n    } else {\r\n      handleNextStory();\r\n    }\r\n  }\r\n\r\n  if (!stories || stories.length === 0) {\r\n    return (\r\n      <SafeAreaView>\r\n        <ActivityIndicator />\r\n      </SafeAreaView>\r\n    )\r\n  }\r\n\r\n  const activeStory = stories[activeStoryIndex];\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <TouchableWithoutFeedback onPress={handlePress}>\r\n        <ImageBackground source={{uri: activeStory.image}} style={styles.image}>\r\n          <View style={styles.userInfo}>\r\n            <ProfilePicture uri={activeStory.user.image} size={50} />\r\n            <Text style={styles.userName}>{activeStory.user.name}</Text>\r\n            <Text style={styles.postedTime}>{activeStory.createdAt}</Text>\r\n          </View>\r\n          <View style={styles.bottomContainer}>\r\n            <View style={styles.cameraButton}>\r\n              <Feather name=\"camera\" size={30} color={'#ffffff'}  />\r\n            </View>\r\n            <View style={styles.textInputContainer}>\r\n              <TextInput\r\n                style={styles.textInput}\r\n                editable\r\n                placeholder=\"Send message\"\r\n                placeholderTextColor={\"white\"}\r\n              />\r\n            </View>\r\n            <View style={styles.messageButton}>\r\n              <Ionicons name=\"paper-plane-outline\" size={35} color={\"#ffffff\"}/>\r\n            </View>\r\n          </View>\r\n        </ImageBackground>\r\n      </TouchableWithoutFeedback>\r\n    </SafeAreaView>\r\n  )\r\n}\r\n\r\nexport default StoryScreen;"]},"metadata":{},"sourceType":"module"}